:root{
    /* Palette */
    --bg: #f8fafc;
    --card: #ffffff;
    --card-2: #f1f5f9;
    --ink-1:#0f172a; --ink-2:#334155; --ink-3:#64748b;
    --primary:#1c64f2; --primary-600:#155eef; --primary-700:#0b4bd6;
    --accent:#10b981;
    --danger:#ef4444; --warning:#f59e0b; --info:#3b82f6; --success:#10b981;
    --border:#e5e7eb;
    --muted:#f1f5f9;

    /* Effects */
    --radius-sm:8px; --radius-md:12px; --radius-lg:16px; --radius-xl:20px;
    --shadow-1:0 1px 2px rgba(0,0,0,.05);
    --shadow-2:0 8px 30px rgba(2,6,23,.08);
    --ring: 0 0 0 4px rgba(28,100,242,.15);

    /* Layout */
    --sidebar-w:260px;
    --header-h:64px;
    --z-header:30; --z-sidebar:40; --z-drawer:50; --z-modal:60; --z-toast:70;
}
[data-theme="dark"]{
    --bg:#0b1220; --card:#0f172a; --card-2:#111827;
    --ink-1:#e5e7eb; --ink-2:#cbd5e1; --ink-3:#94a3b8;
    --primary:#3b82f6; --primary-600:#2563eb; --primary-700:#1d4ed8;
    --accent:#22c55e;
    --danger:#f87171; --warning:#fbbf24; --info:#60a5fa; --success:#34d399;
    --border:#1f2937;
    --muted:#0b1220;
    --ring: 0 0 0 4px rgba(59,130,246,.2);
}
*{box-sizing:border-box}
html,body{height:100%}
body{
    margin:0; background:var(--bg); color:var(--ink-1);
    font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
    -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
}
a{color:inherit; text-decoration:none}
button{font:inherit} input,select,textarea{font:inherit;color:inherit}

/* Utilities */
.hide{display:none !important}
.muted{color:var(--ink-3)}
.sr-only{position:absolute; width:1px; height:1px; padding:0; margin:-1px; overflow:hidden; clip:rect(0,0,0,0); white-space:nowrap; border:0}
.link{color:var(--primary); font-weight:600}
.chip{display:inline-flex;align-items:center;gap:6px;padding:6px 10px;border:1px solid var(--border);border-radius:999px;background:var(--card-2);font-weight:600;font-size:12px}
.badge{display:inline-flex;align-items:center;gap:6px;padding:4px 8px;border-radius:999px;background:rgba(16,185,129,.12);color:#059669;font-weight:700;font-size:11px}
.danger{background:rgba(239,68,68,.1); color:#ef4444}
.warning{background:rgba(245,158,11,.1); color:#f59e0b}
.success{background:rgba(16,185,129,.12); color:#10b981}
.kpi{display:inline-flex;align-items:center;gap:8px;padding:8px 10px;border-radius:999px;background:var(--card-2);border:1px solid var(--border);font-weight:700}
.center{display:grid;place-items:center}
.icon{width:1em;height:1em;stroke-width:2.5px}

/* Buttons */
.btn{display:inline-flex;align-items:center;justify-content:center;gap:8px;padding:10px 14px;border-radius:12px;border:1px solid var(--border);background:var(--card);cursor:pointer;box-shadow:var(--shadow-1);transition:.2s;font-weight:600}
.btn:hover{transform:translateY(-1px); box-shadow:var(--shadow-2)}
.btn:focus-visible{outline:none; box-shadow:var(--shadow-2), var(--ring)}
.btn-primary{background:var(--primary); color:#fff; border-color:transparent}
.btn-primary:hover{background:var(--primary-600)}
.btn-ghost{background:transparent}
.btn-danger{background:var(--danger); color:#fff; border-color:transparent}
.btn-icon{padding:10px;border-radius:12px;aspect-ratio:1/1}
.btn-small{padding:8px 10px; border-radius:10px; font-size:13px; gap:6px}
.btn-outline{background:transparent;border:1px solid var(--border);color:var(--primary)}
.btn:disabled{cursor:not-allowed;opacity:0.7}

/* Button Loader */
@keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
.loader {
    width: 1em; height: 1em;
    border: 2px solid currentColor;
    border-bottom-color: transparent;
    border-radius: 50%;
    display: inline-block;
    animation: spin .6s linear infinite;
}

/* Inputs */
.input,.select,.textarea{
    width:100%; padding:11px 12px; background:#fff; border:1px solid var(--border); border-radius:12px; outline:none;
}
[data-theme="dark"] .input,[data-theme="dark"] .select,[data-theme="dark"] .textarea{background:#0b1220}
.input:focus,.select:focus,.textarea:focus{box-shadow:var(--ring); border-color:var(--primary)}
.label{display:flex;align-items:center;justify-content:space-between;font-weight:700;margin:4px 0 8px 0}
.hint{font-size:12px;color:var(--ink-3);margin-top:4px}
.error{font-size:12px;color:var(--danger);margin-top:4px}
.toggle{display:inline-flex;cursor:pointer;align-items:center;gap:8px;user-select:none}
.toggle-switch{position:relative;display:inline-block;width:36px;height:20px}
.toggle-switch input{opacity:0;width:0;height:0}
.toggle-slider{position:absolute;cursor:pointer;inset:0;background-color:#ccc;border-radius:34px;transition:.2s}
.toggle-slider:before{position:absolute;content:"";height:14px;width:14px;left:3px;bottom:3px;background-color:white;border-radius:50%;transition:.2s}
input:checked + .toggle-slider{background-color:var(--accent)}
input:checked + .toggle-slider:before{transform:translateX(16px)}

/* Image Preview Grid */
.image-preview-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
    gap: 10px;
    margin-top: 10px;
}
.image-preview-item {
    position: relative;
    width: 100%;
    padding-top: 100%; /* Aspect ratio 1:1 */
    border: 1px solid var(--border);
    border-radius: 12px;
    overflow: hidden;
}
.image-preview-item img {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    object-fit: cover;
}
.image-preview-item .remove-btn {
    position: absolute;
    top: 4px;
    right: 4px;
    background: rgba(0,0,0,0.6);
    color: white;
    border: none;
    border-radius: 50%;
    width: 24px;
    height: 24px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 0;
}


/* Skeleton */
@keyframes pulse{0%{opacity:.6}50%{opacity:1}100%{opacity:.6}}
.skeleton{background:linear-gradient(90deg,rgba(148,163,184,.18),rgba(148,163,184,.1),rgba(148,163,184,.18)); border-radius:12px; height:42px; animation:pulse 1.2s ease-in-out infinite}

/* Layout */
.app{display:grid; grid-template-columns: var(--sidebar-w) 1fr; grid-template-rows: var(--header-h) auto 1fr; min-height:100dvh}
.sidebar{grid-row:1 / span 3; background:var(--card); border-right:1px solid var(--border); position:sticky; top:0; height:100dvh; z-index:var(--z-sidebar); display:flex; flex-direction:column}
.brand{display:flex;align-items:center;gap:10px;padding:16px;border-bottom:1px solid var(--border)}
.brand-logo{width:36px;height:36px;border-radius:10px;background:var(--primary);display:grid;place-items:center;color:#fff;font-weight:800}
.nav{padding:10px}
.nav a{display:flex;align-items:center;gap:12px;padding:10px 12px;border-radius:12px;color:var(--ink-2);font-weight:700}
.nav a.active{background:var(--primary); color:#fff}
.nav a:hover{background:var(--card-2)}
.nav .section{margin:14px 12px 6px; font-size:12px; color:var(--ink-3); font-weight:800; letter-spacing:.06em; text-transform:uppercase}
.sidebar-footer{margin-top:auto;padding:12px;border-top:1px solid var(--border);display:flex;gap:8px;flex-wrap:wrap}

header.appbar{grid-column:2; height:var(--header-h); position:sticky; top:0; z-index:var(--z-header);
    display:grid; grid-template-columns: auto 1fr auto; gap:12px; align-items:center; padding:10px 16px; background:var(--card); border-bottom:1px solid var(--border)}
.hamburger{display:none}
.search{display:flex; align-items:center; gap:8px; background:var(--bg); border:1px solid var(--border); border-radius:12px; padding:8px 10px}
.search input{border:none; background:transparent; outline:none; width:100%}
.top-actions{display:flex;gap:8px}
.breadcrumbs{grid-column: 2; padding:10px 16px; border-bottom:1px solid var(--border); background:var(--card-2); font-size: 14px;}
.breadcrumbs .crumb{color:var(--ink-3)}
.breadcrumbs .sep{margin:0 6px; color:var(--ink-3)}
main{grid-column:2; padding:16px}

/* Toolbar page */
.toolbar{display:grid; grid-template-columns: 1fr auto auto; gap:10px; margin-bottom:12px}
.view-toggle{display:flex; gap:6px}
.filters{display:flex; gap:8px; flex-wrap:wrap}

/* Table */
.table{width:100%; border-collapse:separate; border-spacing:0; background:var(--card); border:1px solid var(--border); border-radius:16px; overflow:hidden}
.table th,.table td{padding:12px 14px; border-bottom:1px solid var(--border); vertical-align:middle; text-align:left}
.table th{background:var(--card-2); font-size:12px; color:var(--ink-3); text-transform:uppercase; letter-spacing:.04em}
.table th.sortable{cursor:pointer; user-select:none}
.table th.sortable:hover{background:var(--border)}
.table th .sort-icon{opacity:0.3; transition: .2s}
.table th.sorted .sort-icon{opacity:1}
.table tr:hover td{background:rgba(148,163,184,.08)}
.table .img{width:48px;height:48px;border-radius:12px;object-fit:cover;border:1px solid var(--border); background:#fff}
.table .actions{display:flex;gap:6px;justify-content:flex-end}

/* Cards grid */
.grid{display:grid; grid-template-columns: repeat( auto-fill, minmax(260px,1fr) ); gap:12px}
.card{background:var(--card); border:1px solid var(--border); border-radius:16px; padding:12px; display:flex; gap:12px; box-shadow:var(--shadow-1)}
.card:hover{box-shadow:var(--shadow-2)}
.thumb{width:84px;height:84px;border-radius:12px;object-fit:cover;border:1px solid var(--border); background:#fff}
.grow{flex:1}

/* Forms */
.form-wrap{max-width:920px; margin:0 auto; background:var(--card); border:1px solid var(--border); border-radius:16px; padding:16px}
.form-head{display:flex; align-items:center; justify-content:space-between; gap:8px; margin-bottom:8px}
.form-main{display:grid; gap:12px}
.twocol{display:grid; gap:12px; grid-template-columns:1fr 1fr}
@media (max-width: 720px){ .twocol{grid-template-columns:1fr} }
.form-actions{display:flex; gap:10px; justify-content:flex-end}

/* Drawer (mobile) */
.drawer{position:fixed; inset:0; display:none; z-index:var(--z-drawer)}
.drawer.open{display:block}
.drawer .panel{position:absolute; inset:0 30% 0 0; background:var(--card); border-right:1px solid var(--border); padding:0; max-width:360px}
.drawer .backdrop{position:absolute; inset:0; background:rgba(2,6,23,.45); backdrop-filter: blur(2px)}
@media (min-width: 960px){ .drawer{display:none !important} .hamburger{display:none} }
@media (max-width: 959px){
    .app{grid-template-columns: 1fr; grid-template-rows: var(--header-h) auto 1fr;}
    .sidebar{display:none}
    header.appbar{grid-column:1}
    .breadcrumbs{grid-column:1}
    main{grid-column:1}
    .hamburger{display:inline-flex}
}

/* Modal */
.modal{position:fixed; inset:0; display:none; align-items:center; justify-content:center; z-index:var(--z-modal)}
.modal.open{display:flex}
.modal .sheet{width:min(520px,calc(100vw - 32px)); background:var(--card); border:1px solid var(--border); border-radius:16px; box-shadow:var(--shadow-2)}
.modal .head{display:flex; align-items:center; justify-content:space-between; padding:14px 16px; border-bottom:1px solid var(--border); font-weight:800}
.modal .body{padding:14px 16px}
.modal .foot{padding:12px 16px; display:flex; gap:8px; justify-content:flex-end; border-top:1px solid var(--border)}

/* Toasts */
.toasts{position:fixed; right:16px; bottom:16px; display:flex; flex-direction:column; gap:8px; z-index:var(--z-toast)}
.toast{background:var(--card); border:1px solid var(--border); border-left:4px solid var(--primary); border-radius:12px; padding:10px 12px; min-width:260px; box-shadow:var(--shadow-2); display:flex; gap:10px; align-items:flex-start}
.toast.success{border-left-color:var(--success)}
.toast.error{border-left-color:var(--danger)}
.toast .title{font-weight:800}
.toast .msg{font-size:13px; color:var(--ink-2)}
.toast .icon{width:18px;height:18px}

/* Login */
.login{min-height:100dvh; display:grid; place-items:center; padding:24px}
.login-card{width:min(440px,100%); background:var(--card); border:1px solid var(--border); border-radius:18px; padding:18px; box-shadow:var(--shadow-2)}
.login-header{display:flex;align-items:center;gap:10px;margin-bottom:8px}
.login-title{font-size:20px;font-weight:900}
.login-actions{display:flex;gap:8px;justify-content:space-between;align-items:center}
.small{font-size:12px;color:var(--ink-3)}
